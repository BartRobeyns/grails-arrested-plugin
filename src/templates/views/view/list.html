<% import grails.persistence.Event %>
<div data-ng-controller="${className}Ctrl" data-ng-init="getAll${className}()">
    <h1>${className} List</h1>
 	<div data-ng-show="errors.showErrors" class="red">
		<div ng-repeat="error in errors.errorMessages">
			<strong></strong> <span ng-bind="error"></span>
		</div>
	</div>
	   
	
        <div>
            <p></p>
             <input type="search" placeholder="\${message(code:'default.filter.label', default:'Filter results')}" ng-model="search"/>
             <a class="btn btn-primary btn-primary" data-ng-click="new${className}()"><span class="glyphicon glyphicon-plus"></span><g:message code="default.new.label" args="['${domainTitle}']" default="New ${domainTitle}"/></a>
            <p></p>
        </div>
        <div>
            <div>
                <div>
                    <%  excludedProps = Event.allEvents.toList() << 'id' << 'version'
                    allowedNames = domainClass.name << 'dateCreated' << 'lastUpdated'
                    props = domainClass.findAll { allowedNames.contains(it.name) && !excludedProps.contains(it.name) && it.type != null && !Collection.isAssignableFrom(it.type) }
                    %>
					
					
                    <table class="table table-condensed table-striped table-responsive table-hover"  ng-table="tableParams" template-pagination="custom/pager">
                        <thead>
                        <tr>
                            <%for (p in props) {
                            if (p.isAssociation()) { %>
                            <th>${p.naturalName}</th>
                            <%  } else { %>
                            <th data-sortable="${p.name}">${p.naturalName}</th>
                            <%  } } %>
                        </tr>
                        </thead>
                        <tbody>
                        <tr data-ng-repeat="instance in (${domainInstance}s|orderBy:'id':true|filter:search)" data-ng-click="edit${className}(instance)">
                            <%  for (p in props) { %>
                            <td>{{instance.${p.name}}}</td>
                            <%  } %>
                        </tr>
                        </tbody>
                    </table>
                    <script type="text/ng-template" id="custom/pager">
           			 <ul class="pager ng-cloak">
             			<li ng-repeat="page in pages"
                   		ng-class="{'disabled': !page.active, 'previous': page.type == 'prev', 'next': page.type == 'next'}"
                    	ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
                			<a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo; Previous</a>
                			<a ng-switch-when="next" ng-click="params.page(page.number)" href="">Next &raquo;</a>
              			</li>
                		<li> 
                			<div class="btn-group">
								<button type="button" ng-class="{'active':params.count() == 5}" ng-click="params.count(5)" class="btn btn-default">5</button>
                    			<button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default">10</button>
                    			<button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default">25</button>
                    			<button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default">50</button>
                    			<button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default">100</button>
                			</div>
                		</li>
            		</ul>
        		</script>
                </div>
            </div>
        </div>
    </div>
</div>